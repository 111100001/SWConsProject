<div dir="rtl">

## ClassDef Base
**Base**: وظيفة الفئة Base هي توفير بنية أساسية للجداول في قاعدة البيانات باستخدام SQLAlchemy.

**attributes**: السمات الخاصة بهذه الفئة.
· `id`: عمود من النوع Integer يعمل كمفتاح أساسي (primary key) للجدول.

**Code Description**: 
الفئة Base تُعتبر فئة أساسية (base class) تُستخدم لتعريف الهيكل العام للجداول في قاعدة البيانات. تحتوي هذه الفئة على سمة واحدة وهي `id`، والتي تُعرف كعمود من النوع Integer وتعمل كمفتاح أساسي للجدول. هذا المفتاح الأساسي يضمن أن كل صف في الجدول له معرف فريد.

في المشروع الحالي، يتم استخدام الفئة Base كفئة أساسية للفئات الأخرى مثل A وB وC. كل من هذه الفئات ترث من Base وبالتالي تحصل على سمة `id` تلقائيًا. هذا يسمح بإنشاء جداول مترابطة في قاعدة البيانات حيث يمكن لكل جدول أن يحتوي على معرف فريد خاص به.

على سبيل المثال، الفئة A ترث من Base وتضيف جدولًا باسم "a" مع علاقات مع الفئة B. الفئة B بدورها ترث من Base وتضيف جدولًا باسم "b" مع علاقات مع الفئة C. الفئة C أيضًا ترث من Base وتضيف جدولًا باسم "c". هذا الترابط بين الجداول يتم إدارته من خلال المفاتيح الأجنبية (Foreign Keys) والعلاقات (Relationships) المحددة في الفئات.

**Note**: 
- عند استخدام الفئة Base كفئة أساسية، تأكد من أن الفئات التي ترث منها تحدد اسم الجدول (`__tablename__`) بشكل صحيح.
- المفتاح الأساسي `id` يتم إنشاؤه تلقائيًا لكل صف في الجدول، لذلك لا داعي لتحديده يدويًا عند إضافة بيانات جديدة.
- يجب مراعاة العلاقات بين الجداول عند تصميم الفئات التي ترث من Base لضمان سلامة البيانات والاستعلامات الفعالة.
## ClassDef GenDefaultCollection
**GenDefaultCollection**: وظيفة GenDefaultCollection هي توفير مجموعة افتراضية (default collection) عند الوصول إلى مفتاح غير موجود في القاموس.

**attributes**: لا تحتوي هذه الفئة على أي سمات (attributes) محددة بشكل صريح في الكود المقدم.

**Code Description**:  
تمثل هذه الفئة `GenDefaultCollection` امتدادًا للفئة `KeyFuncDict`، وهي مصممة للتعامل مع الحالات التي يتم فيها الوصول إلى مفتاح غير موجود في القاموس. عند حدوث ذلك، يتم تنفيذ الدالة `__missing__`، والتي تقوم بإنشاء كائن جديد من النوع `B` باستخدام المفتاح المفقود كمعامل، ثم إضافته إلى القاموس وإرجاعه.  

في المشروع، يتم استخدام `GenDefaultCollection` كجزء من علاقة (relationship) في الفئة `A`، حيث يتم تمرير دالة `operator.attrgetter("key")` لإنشاء مجموعة افتراضية تعتمد على القيمة المحددة بواسطة المفتاح. يتم استخدام هذه المجموعة الافتراضية لإدارة العلاقات بين الكائنات من النوع `A` و`B`، حيث يتم الوصول إلى القيم المرتبطة عبر الـ `association_proxy` المسمى `collections`.  

**Note**:  
- يجب أن تكون الفئة `B` موجودة ومحددة بشكل صحيح في المشروع، حيث يتم إنشاء كائنات منها عند الوصول إلى مفتاح غير موجود.  
- يتم استخدام `GenDefaultCollection` بشكل أساسي في سياق إدارة العلاقات بين الكائنات، لذا يجب التأكد من أن المفاتيح المستخدمة متوافقة مع هيكل البيانات المتوقع.

**Output Example**:  
عند الوصول إلى مفتاح غير موجود مثل `some_key`، سيقوم الكود بإنشاء كائن جديد من النوع `B` وإضافته إلى القاموس، ثم إرجاعه. على سبيل المثال:  
```python
collection = GenDefaultCollection()
value = collection["some_key"]  # سيتم إنشاء كائن جديد من النوع B وإضافته إلى القاموس
```
### FunctionDef __missing__(self, key)
**__missing__**: وظيفة `__missing__` هي إضافة مفتاح جديد إلى القاموس إذا لم يكن موجودًا بالفعل، ثم إرجاع القيمة المرتبطة بهذا المفتاح.

**parameters**: معاملات هذه الوظيفة.
· `key`: المفتاح الذي يتم البحث عنه في القاموس. إذا لم يتم العثور عليه، يتم إنشاء قيمة جديدة له باستخدام الفئة `B`.

**Code Description**: 
تقوم هذه الوظيفة بالتحقق مما إذا كان المفتاح المحدد (`key`) موجودًا في القامور. إذا لم يكن المفتاح موجودًا، يتم إنشاء كائن جديد من الفئة `B` باستخدام المفتاح كمعامل، ثم يتم إضافة هذا الكائن إلى القاموس تحت المفتاح المحدد. أخيرًا، يتم إرجاع الكائن الذي تم إنشاؤه.

تستخدم هذه الوظيفة الفئة `B` لإنشاء الكائن الجديد. الفئة `B` تمثل جدولًا في قاعدة البيانات يحتوي على علاقات مع جداول أخرى، وتوفر واجهة للتعامل مع البيانات المرتبطة. عند إنشاء كائن جديد من الفئة `B`، يتم تمرير المفتاح (`key`) كمعامل لتهيئة الكائن.

**Note**: 
- تأكد من أن المفتاح الذي يتم تمريره إلى هذه الوظيفة متوافق مع النوع المتوقع من قبل الفئة `B`.
- هذه الوظيفة مفيدة في الحالات التي تريد فيها التأكد من وجود مفتاح معين في القامور، وإنشاء قيمة افتراضية له إذا لم يكن موجودًا.

**Output Example**: 
إذا تم استدعاء هذه الوظيفة مع مفتاح غير موجود مثل `"new_key"`، فإن النتيجة ستكون كائنًا جديدًا من الفئة `B` يتم إضافته إلى القاموس وإرجاعه. على سبيل المثال:
```python
result = collection["new_key"]
# result سيكون كائنًا جديدًا من الفئة B مع المفتاح "new_key"
```
***
## ClassDef A
**A**: وظيفة الفئة A هي تمثيل جدول في قاعدة البيانات مع علاقات محددة مع الفئة B وإدارة القيم المرتبطة عبر وكيل ارتباط (association proxy).

**attributes**: السمات الخاصة بهذه الفئة.
· `__tablename__`: سمة تحدد اسم الجدول في قاعدة البيانات، وهو "a" في هذه الحالة.
· `associations`: سمة تمثل العلاقة مع الفئة B باستخدام مجموعة افتراضية (GenDefaultCollection) تعتمد على القيمة المحددة بواسطة المفتاح.
· `collections`: وكيل ارتباط (association proxy) يعمل كجسر بين سمة `associations` والقيم المرتبطة بالفئة B.

**Code Description**: 
الفئة A تمثل جدولًا في قاعدة البيانات باسم "a" وتحتوي على علاقة مع الفئة B. يتم تعريف هذه العلاقة عبر السمة `associations`، والتي تستخدم الفئة `GenDefaultCollection` لإنشاء مجموعة افتراضية تعتمد على القيمة المحددة بواسطة المفتاح. يتم استخدام الدالة `operator.attrgetter("key")` لاستخراج المفتاح من الكائنات المرتبطة.

السمة `collections` تعمل كـ association proxy، حيث تقوم بجسر العلاقة من `associations` إلى القيم المرتبطة بالفئة B. هذا يسمح بالوصول المباشر إلى القيم المرتبطة دون الحاجة إلى التعامل مباشرة مع الكائنات من النوع B.

الفئة A ترث من الفئة Base، مما يعني أنها تحتوي على سمة `id` كمفتاح أساسي للجدول. هذا يضمن أن كل صف في الجدول له معرف فريد.

**Note**: 
- يجب أن تكون الفئة B موجودة ومحددة بشكل صحيح في المشروع، حيث يتم استخدامها في العلاقة المحددة في الفئة A.
- يتم استخدام `GenDefaultCollection` لإدارة العلاقات بين الكائنات من النوع A وB، لذا يجب التأكد من أن المفاتيح المستخدمة متوافقة مع هيكل البيانات المتوقع.
- يجب مراعاة أن `collections` يعمل كـ association proxy، مما يعني أنه يوفر وصولًا مباشرًا إلى القيم المرتبطة بالفئة B.
## ClassDef B
**B**: وظيفة الفئة B هي تمثيل جدول في قاعدة البيانات يحتوي على علاقات مع جداول أخرى وتوفير واجهة للتعامل مع البيانات المرتبطة.

**attributes**: السمات الخاصة بهذه الفئة.
· `__tablename__`: اسم الجدول في قاعدة البيانات، وهو "b".
· `a_id`: عمود من النوع Integer يعمل كمفتاح أجنبي (Foreign Key) يشير إلى العمود `id` في الجدول "a". هذا العمود غير قابل للقيمة الفارغة (nullable=False).
· `elements`: علاقة (relationship) مع الفئة "C" باستخدام مجموعة (set) كفئة تجميعية (collection_class).
· `key`: عمود من النوع String يمثل المفتاح الرئيسي للجدول.
· `values`: وكيل ارتباط (association_proxy) يعمل كجسر بين العناصر في `elements` والقيمة (value) في الفئة "C".

**Code Description**: 
الفئة B ترث من الفئة الأساسية `Base`، مما يعني أنها تحتوي على سمة `id` تلقائيًا كمفتاح أساسي. بالإضافة إلى ذلك، تحدد الفئة B جدولًا في قاعدة البيانات باسم "b" يحتوي على عدة أعمدة وعلاقات.

العمود `a_id` يعمل كمفتاح أجنبي يشير إلى العمود `id` في الجدول "a"، مما يسمح بإنشاء علاقة بين الجدولين. العلاقة `elements` تربط الفئة B بالفئة "C" باستخدام مجموعة (set) كفئة تجميعية، مما يسمح بتخزين عناصر متعددة من الفئة "C" في مجموعة مرتبطة بالفئة B.

الوكيل `values` يعمل كجسر بين العناصر في `elements` والقيمة (value) في الفئة "C". هذا يسمح بالوصول المباشر إلى قيم العناصر في الفئة "C" من خلال الفئة B دون الحاجة إلى التعامل مباشرة مع الكائنات من الفئة "C".

في البناء (__init__)، يتم تهيئة الفئة B بقيمة `key` وقائمة `values` اختيارية. إذا تم توفير قائمة `values`، يتم تعيينها مباشرة إلى الوكيل `values`.

**Note**: 
- عند استخدام الفئة B، تأكد من أن العلاقات مع الجداول الأخرى (مثل "a" و"C") محددة بشكل صحيح لضمان سلامة البيانات.
- الوكيل `values` يسهل الوصول إلى قيم العناصر في الفئة "C"، ولكن يجب التأكد من أن هذه القيم متوافقة مع النوع المتوقع.
- العلاقة `elements` تستخدم مجموعة (set) كفئة تجميعية، مما يعني أن العناصر ستكون فريدة ولا يمكن تكرارها.
### FunctionDef __init__(self, key, values)
**__init__**: وظيفة `__init__` هي تهيئة كائن من الفئة `B` عن طريق تعيين القيم الأولية للخصائص.

**parameters**: معاملات هذه الوظيفة.
· `key`: المعامل الأول، وهو يمثل المفتاح الذي سيتم تعيينه للكائن.
· `values`: المعامل الثاني (اختياري)، وهو يمثل القيم التي سيتم تعيينها للكائن. إذا لم يتم توفير هذا المعامل، فسيتم تجاهله.

**Code Description**: 
تقوم هذه الوظيفة بتهيئة كائن من الفئة `B` عن طريق تعيين قيمة للمفتاح (`key`) والقيم (`values`) إذا تم توفيرها. يتم ذلك من خلال الخطوات التالية:
1. يتم تعيين قيمة المعامل `key` إلى الخاصية `self.key` الخاصة بالكائن.
2. يتم التحقق مما إذا كان المعامل `values` قد تم توفيره. إذا كان موجودًا، يتم تعيين قيمته إلى الخاصية `self.values` الخاصة بالكائن.

**Note**: 
- إذا لم يتم توفير المعامل `values`، فلن يتم تعيين أي قيمة للخاصية `self.values`، وسيتم تجاهل هذه الخطوة.
- هذه الوظيفة هي جزء من عملية إنشاء كائن جديد من الفئة `B`، ويتم استدعاؤها تلقائيًا عند إنشاء الكائن.
***
## ClassDef C
**C**: وظيفة الفئة C هي تمثيل جدول في قاعدة البيانات يحتوي على قيمة عددية وعلاقة مع جدول آخر.

**attributes**: السمات الخاصة بهذه الفئة.
· `b_id`: عمود من النوع Integer يعمل كمفتاح أجنبي (Foreign Key) يشير إلى العمود `id` في الجدول `b`. هذا العمود غير قابل للقيمة الفارغة (nullable=False).
· `value`: عمود من النوع Integer يمثل القيمة العددية المخزنة في هذا الجدول.

**Code Description**: 
الفئة C هي فئة تمثل جدولًا في قاعدة البيانات باسم "c". هذه الفئة ترث من الفئة الأساسية `Base`، مما يعني أنها تحتوي تلقائيًا على العمود `id` كمفتاح أساسي (primary key). بالإضافة إلى ذلك، تحتوي الفئة C على عمودين إضافيين:

1. `b_id`: هذا العمود يعمل كمفتاح أجنبي (Foreign Key) يشير إلى العمود `id` في الجدول `b`. يتم استخدامه لإنشاء علاقة بين الجدول `c` والجدول `b`. القيمة في هذا العمود غير قابلة للفارغة (nullable=False)، مما يعني أن كل صف في الجدول `c` يجب أن يحتوي على قيمة صالحة تشير إلى صف موجود في الجدول `b`.

2. `value`: هذا العمود يمثل قيمة عددية يتم تخزينها في الجدول `c`. يمكن أن تكون هذه القيمة أي عدد صحيح.

عند إنشاء كائن من الفئة C، يتم تمرير قيمة `value` كمعامل إلى المُنشئ (constructor)، ويتم تعيين هذه القيمة إلى السمة `value` في الكائن.

**Note**: 
- عند استخدام الفئة C، تأكد من أن القيمة الممررة إلى `b_id` تشير إلى صف موجود في الجدول `b` لضمان سلامة البيانات.
- القيمة الممررة إلى `value` يجب أن تكون عددًا صحيحًا.
- الفئة C تعتمد على الفئة الأساسية `Base`، لذلك يجب التأكد من أن الفئة `Base` مُعرّفة بشكل صحيح في المشروع.
### FunctionDef __init__(self, value)
**__init__**: وظيفة `__init__` هي تهيئة كائن من الفئة `C` بقيمة معينة.

**parameters**: معاملات هذه الوظيفة.
· `value`: القيمة التي سيتم تعيينها للكائن عند إنشائه.

**Code Description**: 
تقوم هذه الوظيفة بتهيئة كائن من الفئة `C` عن طريق تعيين القيمة المُمررة كمعامل (`value`) إلى السمة `self.value`. السمة `self.value` هي سمة خاصة بالكائن (instance attribute) تُستخدم لتخزين القيمة التي تم تمريرها عند إنشاء الكائن. 

عند إنشاء كائن جديد من الفئة `C`، يتم استدعاء هذه الوظيفة تلقائيًا، ويتم تعيين القيمة المُمررة إلى السمة `self.value`. على سبيل المثال، إذا تم إنشاء كائن باستخدام `obj = C(10)`، فإن `self.value` سيحمل القيمة `10`.

**Note**: 
- يجب أن يتم تمرير قيمة واحدة فقط عند إنشاء كائن من الفئة `C`، حيث أن الوظيفة تتوقع معاملًا واحدًا فقط (`value`).
- هذه الوظيفة هي جزء من آلية التهيئة في بايثون (Python's initialization mechanism) وتُعرف باسم المُنشئ (constructor).
***
</div>
